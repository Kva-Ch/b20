{"ast":null,"code":"import * as Constants from \"../constants.js\";\nimport axios from 'axios'; // axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n\nasync function loginApi(email, password) {\n  var data = {\n    \"Email\": email,\n    \"Password\": password\n  };\n  var url = Constants.base_url + \"/login\"; // console.log(\"Here 2\");\n\n  let returnValue; // await axios({\n  //   url: url,\n  //   method: \"POST\",\n  //   data: data\n  // }).then((res) => {\n  //    console.log(\"Here 3\");\n  //   const data = res.data;\n  //    console.log(data.status, typeof(data.status));\n  //   if(localStorage.getItem('accessToken')){\n  //       localStorage.removeItem('accessToken');\n  //   }\n  //   if(localStorage.getItem('uid')){\n  //       localStorage.removeItem('uid');\n  //   }\n  //   if (data.status == true) {\n  //      user logged in safe\n  //     if (data.token) {\n  //       localStorage.setItem('accessToken', data.token);\n  //     }\n  //     if(data.user.UserId){\n  //       localStorage.setItem('uid', data.user.UserId);\n  //     }\n  //     returnValue = 200;\n  //   } else {\n  //      credentials wrong or such cases\n  //     if(localStorage.getItem('accessToken')){\n  //         localStorage.removeItem('accessToken');\n  //     }\n  //     if(localStorage.getItem('uid')){\n  //         localStorage.removeItem('uid');\n  //     }\n  //     alert(data.message);\n  //     returnValue = 400;\n  //   }\n  // }).catch((err) => {\n  //   returnValue = 400;\n  //   alert(err.message);\n  // });\n\n  var config = {\n    method: 'post',\n    url: url,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: data\n  };\n  await axios(config).then(function (res) {\n    const data = res.data;\n\n    if (localStorage.getItem('accessToken')) {\n      localStorage.removeItem('accessToken');\n    }\n\n    if (localStorage.getItem('uid')) {\n      localStorage.removeItem('uid');\n    }\n\n    if (data.status == true) {\n      // user logged in safe\n      if (data.token) {\n        localStorage.setItem('accessToken', data.token);\n      }\n\n      if (data.user.UserId) {\n        localStorage.setItem('uid', data.user.UserId);\n      }\n\n      localStorage.setItem(\"pageNumber\", 1);\n      localStorage.setItem(\"sortBy\", 'id');\n      returnValue = 200;\n    } else {\n      // credentials wrong or such cases\n      if (localStorage.getItem('accessToken')) {\n        localStorage.removeItem('accessToken');\n      }\n\n      if (localStorage.getItem('uid')) {\n        localStorage.removeItem('uid');\n      }\n\n      alert(data.message);\n      returnValue = 400;\n    }\n  }).catch(function (error) {\n    returnValue = 400;\n    alert(error.message);\n  });\n  return returnValue;\n}\n\nexport default loginApi;","map":{"version":3,"names":["Constants","axios","loginApi","email","password","data","url","base_url","returnValue","config","method","headers","then","res","localStorage","getItem","removeItem","status","token","setItem","user","UserId","alert","message","catch","error"],"sources":["/Users/k.chaganti/Desktop/b20/b20/src/controllers/loginApi.jsx"],"sourcesContent":["import * as Constants from \"../constants.js\";\nimport axios from 'axios';\n\n// axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n\nasync function loginApi(email, password) {\n  var data = {\n    \"Email\": email,\n    \"Password\": password\n  };\n  var url = Constants.base_url + \"/login\";\n  // console.log(\"Here 2\");\n  let returnValue;\n  // await axios({\n  //   url: url,\n  //   method: \"POST\",\n  //   data: data\n  // }).then((res) => {\n  //    console.log(\"Here 3\");\n  //   const data = res.data;\n  //    console.log(data.status, typeof(data.status));\n  //   if(localStorage.getItem('accessToken')){\n  //       localStorage.removeItem('accessToken');\n  //   }\n  //   if(localStorage.getItem('uid')){\n  //       localStorage.removeItem('uid');\n  //   }\n  //   if (data.status == true) {\n  //      user logged in safe\n  //     if (data.token) {\n  //       localStorage.setItem('accessToken', data.token);\n  //     }\n  //     if(data.user.UserId){\n  //       localStorage.setItem('uid', data.user.UserId);\n  //     }\n  //     returnValue = 200;\n  //   } else {\n  //      credentials wrong or such cases\n  //     if(localStorage.getItem('accessToken')){\n  //         localStorage.removeItem('accessToken');\n  //     }\n  //     if(localStorage.getItem('uid')){\n  //         localStorage.removeItem('uid');\n  //     }\n  //     alert(data.message);\n  //     returnValue = 400;\n  //   }\n  // }).catch((err) => {\n  //   returnValue = 400;\n  //   alert(err.message);\n  // });\n\n  var config = {\n    method: 'post',\n    url: url,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: data\n  };\n\n  await axios(config).then(function(res) {\n    const data = res.data;\n\n    if (localStorage.getItem('accessToken')) {\n      localStorage.removeItem('accessToken');\n    }\n    if (localStorage.getItem('uid')) {\n      localStorage.removeItem('uid');\n    }\n    if (data.status == true) {\n      // user logged in safe\n      if (data.token) {\n        localStorage.setItem('accessToken', data.token);\n      }\n      if (data.user.UserId) {\n        localStorage.setItem('uid', data.user.UserId);\n      }\n      localStorage.setItem(\"pageNumber\", 1);\n      localStorage.setItem(\"sortBy\", 'id');\n      returnValue = 200;\n    } else {\n      // credentials wrong or such cases\n      if (localStorage.getItem('accessToken')) {\n        localStorage.removeItem('accessToken');\n      }\n      if (localStorage.getItem('uid')) {\n        localStorage.removeItem('uid');\n      }\n      alert(data.message);\n      returnValue = 400;\n    }\n  }).catch(function(error) {\n    returnValue = 400;\n    alert(error.message);\n  });\n  return returnValue;\n}\n\nexport default loginApi;\n"],"mappings":"AAAA,OAAO,KAAKA,SAAZ,MAA2B,iBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AAEA,eAAeC,QAAf,CAAwBC,KAAxB,EAA+BC,QAA/B,EAAyC;EACvC,IAAIC,IAAI,GAAG;IACT,SAASF,KADA;IAET,YAAYC;EAFH,CAAX;EAIA,IAAIE,GAAG,GAAGN,SAAS,CAACO,QAAV,GAAqB,QAA/B,CALuC,CAMvC;;EACA,IAAIC,WAAJ,CAPuC,CAQvC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAIC,MAAM,GAAG;IACXC,MAAM,EAAE,MADG;IAEXJ,GAAG,EAAEA,GAFM;IAGXK,OAAO,EAAE;MACP,gBAAgB;IADT,CAHE;IAMXN,IAAI,EAAEA;EANK,CAAb;EASA,MAAMJ,KAAK,CAACQ,MAAD,CAAL,CAAcG,IAAd,CAAmB,UAASC,GAAT,EAAc;IACrC,MAAMR,IAAI,GAAGQ,GAAG,CAACR,IAAjB;;IAEA,IAAIS,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAJ,EAAyC;MACvCD,YAAY,CAACE,UAAb,CAAwB,aAAxB;IACD;;IACD,IAAIF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAJ,EAAiC;MAC/BD,YAAY,CAACE,UAAb,CAAwB,KAAxB;IACD;;IACD,IAAIX,IAAI,CAACY,MAAL,IAAe,IAAnB,EAAyB;MACvB;MACA,IAAIZ,IAAI,CAACa,KAAT,EAAgB;QACdJ,YAAY,CAACK,OAAb,CAAqB,aAArB,EAAoCd,IAAI,CAACa,KAAzC;MACD;;MACD,IAAIb,IAAI,CAACe,IAAL,CAAUC,MAAd,EAAsB;QACpBP,YAAY,CAACK,OAAb,CAAqB,KAArB,EAA4Bd,IAAI,CAACe,IAAL,CAAUC,MAAtC;MACD;;MACDP,YAAY,CAACK,OAAb,CAAqB,YAArB,EAAmC,CAAnC;MACAL,YAAY,CAACK,OAAb,CAAqB,QAArB,EAA+B,IAA/B;MACAX,WAAW,GAAG,GAAd;IACD,CAXD,MAWO;MACL;MACA,IAAIM,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAJ,EAAyC;QACvCD,YAAY,CAACE,UAAb,CAAwB,aAAxB;MACD;;MACD,IAAIF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAJ,EAAiC;QAC/BD,YAAY,CAACE,UAAb,CAAwB,KAAxB;MACD;;MACDM,KAAK,CAACjB,IAAI,CAACkB,OAAN,CAAL;MACAf,WAAW,GAAG,GAAd;IACD;EACF,CA/BK,EA+BHgB,KA/BG,CA+BG,UAASC,KAAT,EAAgB;IACvBjB,WAAW,GAAG,GAAd;IACAc,KAAK,CAACG,KAAK,CAACF,OAAP,CAAL;EACD,CAlCK,CAAN;EAmCA,OAAOf,WAAP;AACD;;AAED,eAAeN,QAAf"},"metadata":{},"sourceType":"module"}