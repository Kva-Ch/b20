{"ast":null,"code":"import * as Constants from \"../constants.js\";\nimport axios from 'axios'; // axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n\nasync function loginApi(email, password) {\n  var data = {\n    \"Email\": email,\n    \"Password\": password\n  };\n  var url = Constants.base_url + \"/login\"; // console.log(\"Here 2\");\n\n  let returnValue;\n  await axios({\n    url: url,\n    method: \"POST\",\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    },\n    data: data\n  }).then(res => {\n    // console.log(\"Here 3\");\n    const data = res.data; // console.log(data.status, typeof(data.status));\n\n    if (localStorage.getItem('accessToken')) {\n      localStorage.removeItem('accessToken');\n    }\n\n    if (localStorage.getItem('uid')) {\n      localStorage.removeItem('uid');\n    }\n\n    if (data.status == true) {\n      // user logged in safe\n      if (data.token) {\n        localStorage.setItem('accessToken', data.token);\n      }\n\n      if (data.user.UserId) {\n        localStorage.setItem('uid', data.user.UserId);\n      }\n\n      returnValue = 200;\n    } else {\n      // credentials wrong or such cases\n      if (localStorage.getItem('accessToken')) {\n        localStorage.removeItem('accessToken');\n      }\n\n      if (localStorage.getItem('uid')) {\n        localStorage.removeItem('uid');\n      }\n\n      alert(data.message);\n      returnValue = 400;\n    }\n  }).catch(err => {\n    returnValue = 400;\n    alert(err.message);\n  });\n  return returnValue;\n}\n\nexport default loginApi;","map":{"version":3,"names":["Constants","axios","loginApi","email","password","data","url","base_url","returnValue","method","headers","then","res","localStorage","getItem","removeItem","status","token","setItem","user","UserId","alert","message","catch","err"],"sources":["/Users/k.chaganti/Desktop/b20/b20/src/controllers/loginApi.jsx"],"sourcesContent":["import * as Constants from \"../constants.js\";\nimport axios from 'axios';\n\n// axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n\nasync function loginApi(email, password) {\n    var data = {\"Email\": email, \"Password\": password};\n    var url = Constants.base_url + \"/login\";\n    // console.log(\"Here 2\");\n    let returnValue;\n    await axios({\n      url: url,\n      method: \"POST\",\n      headers: {\n          'Access-Control-Allow-Origin': '*'\n        },\n      data: data\n    }).then((res) => {\n      // console.log(\"Here 3\");\n      const data = res.data;\n      // console.log(data.status, typeof(data.status));\n      if(localStorage.getItem('accessToken')){\n          localStorage.removeItem('accessToken');\n      }\n      if(localStorage.getItem('uid')){\n          localStorage.removeItem('uid');\n      }\n      if (data.status == true) {\n        // user logged in safe\n        if (data.token) {\n          localStorage.setItem('accessToken', data.token);\n        }\n        if(data.user.UserId){\n          localStorage.setItem('uid', data.user.UserId);\n        }\n        returnValue = 200;\n      } else {\n        // credentials wrong or such cases\n        if(localStorage.getItem('accessToken')){\n            localStorage.removeItem('accessToken');\n        }\n        if(localStorage.getItem('uid')){\n            localStorage.removeItem('uid');\n        }\n        alert(data.message);\n        returnValue = 400;\n      }\n    }).catch((err) => {\n      returnValue = 400;\n      alert(err.message);\n    });\n    return returnValue;\n}\n\nexport default loginApi;\n"],"mappings":"AAAA,OAAO,KAAKA,SAAZ,MAA2B,iBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AAEA,eAAeC,QAAf,CAAwBC,KAAxB,EAA+BC,QAA/B,EAAyC;EACrC,IAAIC,IAAI,GAAG;IAAC,SAASF,KAAV;IAAiB,YAAYC;EAA7B,CAAX;EACA,IAAIE,GAAG,GAAGN,SAAS,CAACO,QAAV,GAAqB,QAA/B,CAFqC,CAGrC;;EACA,IAAIC,WAAJ;EACA,MAAMP,KAAK,CAAC;IACVK,GAAG,EAAEA,GADK;IAEVG,MAAM,EAAE,MAFE;IAGVC,OAAO,EAAE;MACL,+BAA+B;IAD1B,CAHC;IAMVL,IAAI,EAAEA;EANI,CAAD,CAAL,CAOHM,IAPG,CAOGC,GAAD,IAAS;IACf;IACA,MAAMP,IAAI,GAAGO,GAAG,CAACP,IAAjB,CAFe,CAGf;;IACA,IAAGQ,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAH,EAAuC;MACnCD,YAAY,CAACE,UAAb,CAAwB,aAAxB;IACH;;IACD,IAAGF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAH,EAA+B;MAC3BD,YAAY,CAACE,UAAb,CAAwB,KAAxB;IACH;;IACD,IAAIV,IAAI,CAACW,MAAL,IAAe,IAAnB,EAAyB;MACvB;MACA,IAAIX,IAAI,CAACY,KAAT,EAAgB;QACdJ,YAAY,CAACK,OAAb,CAAqB,aAArB,EAAoCb,IAAI,CAACY,KAAzC;MACD;;MACD,IAAGZ,IAAI,CAACc,IAAL,CAAUC,MAAb,EAAoB;QAClBP,YAAY,CAACK,OAAb,CAAqB,KAArB,EAA4Bb,IAAI,CAACc,IAAL,CAAUC,MAAtC;MACD;;MACDZ,WAAW,GAAG,GAAd;IACD,CATD,MASO;MACL;MACA,IAAGK,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAH,EAAuC;QACnCD,YAAY,CAACE,UAAb,CAAwB,aAAxB;MACH;;MACD,IAAGF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAH,EAA+B;QAC3BD,YAAY,CAACE,UAAb,CAAwB,KAAxB;MACH;;MACDM,KAAK,CAAChB,IAAI,CAACiB,OAAN,CAAL;MACAd,WAAW,GAAG,GAAd;IACD;EACF,CArCK,EAqCHe,KArCG,CAqCIC,GAAD,IAAS;IAChBhB,WAAW,GAAG,GAAd;IACAa,KAAK,CAACG,GAAG,CAACF,OAAL,CAAL;EACD,CAxCK,CAAN;EAyCA,OAAOd,WAAP;AACH;;AAED,eAAeN,QAAf"},"metadata":{},"sourceType":"module"}